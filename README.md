#LDS System 
##Введение
Данная система физически разделена на сервер и клиента и должна уметь две вещи
1. Запущенная в режиме сервера встать на прием информации от клиентов. После полной передачи информации от 
    клиента сервер производит полное обновление таблиц связанных с данным регионом и делает отметку в таблице состояний.
2. Клиент будучи запущенным в одном регионе регулярно связывается с сервером и производит передачу содержимого 
    таблиц БД своего регионального сервера. В том числе и карт с подложками.  
    Вся передача шифруется. Обмен производится в режиме запрос ответ. При любом нарушении канал связи закрывается и 
    изменения не принимаются.
##Протокол обмена
 Собственно обмен состоит из запросов и ответов
    1. После соединения с сервером клиент посылает запрос на передачу информации сообщением

        START REGION <ID региона> 
На что сервер может ответить Ok - согласие на прием или Reject <Причина отказа>- отказ от приема с пояснением. 
Если в течение оговоренного таймаута сервер не ответит, то клиент обязан разорвать соединение.
Соединение в любой момент может быть прервано как сервером так и клиентом. Такой сеанс не должен приводить к отметке 
успешно.         
###Передача таблиц БД 
Данная операция начинается клиентом  посылкой строки вида: 

    START SENDING TABLE <Имя Таблицы>
Далее клиент начинает передавать построчно строки JSON с данными этой таблицы
Завершается передача посылкой строки
 
    END SENDING TABLE <Имя Таблицы>
В ответ сервер может прислать следующие ответы 
1. Если прием произведен успешно

        RECIVE TABLE <Имя Таблицы> LINES <Кол-во принятых строк>
2. Если клиент передал не-то количество строк, либо  передавал не ту таблицу он должен разорвать соединение.
В случае если сервер обнаружил некоторые ошибки в данных принятых 

        REJECT <Сообщение об ошибке>
        
###Передача описания перекрестков
Передача перекрестка начинается с посылки клиентом запроса на передачу

    START SENDING CROSS AREA <Номер района> CROSS <Номер перекрестка>
На что сервер может ответить Ok - согласие на прием или Reject <Причина отказа>- отказ от приема с пояснением. 
Если в течение оговоренного таймаута сервер не ответит, то клиент обязан разорвать соединение.
Соединение в любой момент может быть прервано как сервером так и клиентом. Такой сеанс не должен приводить к отметке 
успешно.         
Далее клиент начинает передавать построчно строки SVG с данными этого перекрестка.
Завершается передача посылкой строки
 
    END SENDING CROSS AREA <Номер района> CROSS <Номер перекрестка>
В ответ сервер может прислать следующие ответы 
1. Если прием произведен успешно

    RECIVE CROSS AREA <Номер района> CROSS <Номер перекрестка> LINES <Кол-во принятых строк>
2. Если клиент передал не-то количество строк, либо  передавал не ту таблицу он должен разорвать соединение.
В случае если сервер обнаружил некоторые ошибки в данных принятых 

    REJECT <Сообщение об ошибке>
###Передача оперативного изменения
В данные пакеты содержат  оперативные изменения в devices. Передача производится по отдельному каналу связи 
и каждая порция начинается посылкой клиентом сообщения
 
    START SENDING CHANGES REGION <ID региона>
На что сервер может ответить Ok - согласие на прием или Reject <Причина отказа>- отказ от приема с пояснением. 
Если в течение оговоренного таймаута сервер не ответит, то клиент обязан разорвать соединение.
Соединение в любой момент может быть прервано как сервером так и клиентом. Такой сеанс не должен приводить к отметке 
успешно.         
Далее клиент начинает передавать построчно строки JSON с измененными данными всех устройств.
Обмен завершается клиентом передачей сообщения 

    END SENDING CHANGES REGION <ID региона>
В ответ сервер может прислать следующие ответы 
1. Если прием произведен успешно

        RECIVE CHANGES REGION <ID региона> LINES <Кол-во принятых строк>
2. Если клиент передал не-то количество строк, либо  передавал не те данные он должен разорвать соединение.
В случае если сервер обнаружил некоторые ошибки в данных принятых 

        REJECT <Сообщение об ошибке>
Открытй канал связи всегда поддерживается в активном состоянии и для
избежания его закрытия в период когда нет изменений клиент посылает сообщение

    EMPTY MESSAGE REGION <ID региона> 
На что сервер должен ответить сообщением 

    Ok 
###Завершение обмена
Завершается передача информации посылкой сообщения 

    END REGION <ID региона>
После получения от сервера сообщения Ok клиент может считать что передача прошла успешно.
